<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<!--
/**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
-->

<configuration>
  <property>
    <name>tajo_worker_heapsize</name>
    <value>1024</value>
    <description>Tajo Worker Heap Size.</description>
  </property>
  <property>
    <name>tajo_worker_xmn_max</name>
    <value>512</value>
    <description>Tajo Worker maximum value for minimum heap size.</description>
  </property>
  <property>
    <name>tajo_worker_xmn_ratio</name>
    <value>0.2</value>
    <description>Tajo Worker minimum heap size is calculated as a percentage of max heap size.</description>
  </property>
  <property>
    <name>tajo_master_heapsize</name>
    <value>1024</value>
    <description>Tajo Master Heap Size</description>
  </property>

  <!-- tajo-env.sh -->
  <property>
    <name>content</name>
    <description>This is the jinja template for tajo-env.sh file</description>
    <value>
# Set environment variables here.

# The java implementation to use. Java 1.6 required.
export JAVA_HOME={{java64_home}}
export HADOOP_HOME=${HADOOP_COMMON_HOME}

export TAJO_CONF_DIR=${TAJO_CONF_DIR:-{{conf_dir}}}


# Extra Java CLASSPATH elements.  Optional.
export TAJO_CLASSPATH=${TAJO_CLASSPATH}

# The maximum amount of heap to use, in MB. Default is 1000.
# export TAJO_MASTER_HEAPSIZE={{master_heapsize}}

# The maximum amount of heap to use, in MB. Default is 1000.
# export TAJO_PULLSERVER_HEAPSIZE=1000

# The maximum amount of heap to use, in MB. Default is 1000.
# export TAJO_QUERYMASTER_HEAPSIZE=1000

# Extra Java runtime options.  Empty by default.
# export TAJO_OPTS=-server

# Extra TajoMaster's java runtime options for TajoMaster. Empty by default
# export TAJO_MASTER_OPTS=

# Extra TajoWorker's java runtime options. Empty by default
export TAJO_WORKER_OPTS="-XX:+UseConcMarkSweepGC -XX:ErrorFile={{log_dir}}/hs_err_pid%p.log -Xmn{{worker_xmn_size}} -XX:CMSInitiatingOccupancyFraction=70  -Xms{{worker_heapsize}} -Xmx{{worker_heapsize}}"

# Extra TajoPullServer's java runtime options. Empty by default
# export TAJO_PULLSERVER_OPTS=

# Extra  QueryMaster mode TajoWorker's java runtime options for TajoMaster. Empty by default
# export TAJO_QUERYMASTER_OPTS=

# Where log files are stored.  $TAJO_HOME/logs by default.
export TAJO_LOG_DIR={{log_dir}}

# The directory where pid files are stored. /tmp by default.
export TAJO_PID_DIR={{pid_dir}}

# A string representing this instance of tajo. $USER by default.
export TAJO_IDENT_STRING=$USER

# The scheduling priority for daemon processes.  See 'man nice'.
# export TAJO_NICENESS=10

# Tajo cluster mode. the default mode is standby mode.
export TAJO_WORKER_STANDBY_MODE=true

# It must be required to use HCatalogStore
# export HIVE_HOME=
# export HIVE_JDBC_DRIVER_DIR=

# Tajo PullServer mode. the default mode is standalone mode
# export TAJO_PULLSERVER_STANDALONE=false

# File naming hosts on which TajoWorker will run. $TAJO_HOME/conf/workers by default.
export TAJO_WORKERS=${TAJO_CONF}/workers

# The maximum amount of heap to use, in MB. Default is 1000.
# export TAJO_HEAPSIZE=1000
    </value>
  </property>

</configuration>
